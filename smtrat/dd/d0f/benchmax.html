<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SMT-RAT: Benchmax</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo_smtrat.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SMT-RAT
   &#160;<span id="projectnumber">24.02</span>
   </div>
   <div id="projectbrief">Toolbox for Strategic and Parallel Satisfiability-Modulo-Theories Solving</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dd/d0f/benchmax.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Benchmax </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__builds_ths_smt_smtrat_doc_markdown_tools_benchmax"></a> Benchmax is a tool for automated benchmarking. Though it was developed and is primary used for testing SMT solvers, it aims to be agnostic of the tools and formats as good as possible.</p>
<p>Its fundamental model is to load a list of tools and a list of benchmarks, run every tool with every benchmark, obtain the results and output all the results. While the benchmarks are fixed to a single file, we allow to choose between different <a class="el" href="../../dd/d0f/benchmax.html#tools">tool interfaces</a>, <a class="el" href="../../dd/d0f/benchmax.html#backends">execution backends</a> and output formats.</p>
<h1><a class="anchor" id="autotoc_md65"></a>
General usage</h1>
<p>Benchmax could be called as follows:</p>
<div class="fragment"><div class="line">./benchmax -T 1m -M 4Gi -S /path/to/smtrat-static -X out.xml -b ssh --ssh.node user@127.0.0.1@5\#9 -D /path/to/benchmark/set</div>
</div><!-- fragment --><p>This will run benchmax with the SMT-RAT tool at <code>/path/to/smtrat-static</code> on the <code>/path/to/benchmark/set</code> with a time limit of 1 minute and a memory limit of 4 gigabyte. The resulst will be written to <code>out.xml</code>. The execution is done on an SSH backend on localhost with 9 connections and executing 5 parallel jobs per connection.</p>
<p>It is recommended to use static builds to avoid issues with missing libraries.</p>
<p>For more information, run <code>./benchmax --help</code>.</p>
<h2><a class="anchor" id="autotoc_md66"></a>
Collecting statistics</h2>
<p>Some tools like SMT-RAT or Z3 can provide statistics about the solving process for each individual benchmark. By using the <code>-s</code> respectively <code>--statistics</code>, statistics are collected and stored in the output file.</p>
<h3><a class="anchor" id="autotoc_md67"></a>
Large output</h3>
<p>It is recommended to aggregate statistics as much as possible inside SMT-RAT. However, if the output might get large, you might want to use <code>--use-tmp</code> to prevent benchmax running out of memory.</p>
<h2><a class="anchor" id="autotoc_md68"></a>
Working with the results</h2>
<p>In the SMT-RAT repository, two utilites for converting the result XML file are included:</p><ul>
<li><code>utilities/benchmax/xml2ods.py</code> for converting it to a <em>Flat XML LibreOffice Calc Sheet</em>.</li>
<li>An XML filter <code>utilities/benchmax/OOCImporter.xsl</code> for converting it to a <em>Flat XML LibreOffice Calc Sheet</em>.</li>
<li><code>utilities/benchmax/evaluation</code> is a small python library for importing the results into Python (or a Jupyter notebook), inspecting the results and preparing plots. For more information, see <a class="el" href="../../dc/d44/benchmax-evaluation.html">Benchmax python utility</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md69"></a>
Using a solver with options</h2>
<p>To pass options to the tested tool, use a string consisting of the path to the tool and the required options instead of only the path. In the example above, if we wanted to use the SMT-RAT tool at <code>/path/to/smtrat-static</code> with some option <code>--op</code> and argument <code>arg</code>, we would call </p><div class="fragment"><div class="line">./benchmax -T 1m -M 4Gi -S &quot;/path/to/smtrat-static -op arg&quot; -X ...</div>
</div><!-- fragment --><p> (<code>...</code> being the same as before).</p>
<h1><a class="anchor" id="tools"></a>
Tools</h1>
<p>A tool represents a binary that can be executed on some input files. It is responsible for deciding whether it can be applied to some given file, building a command line to execute it and retrieve additional results from <code>stdout</code> or <code>stderr</code>.</p>
<p>The generic tool class <code><a class="el" href="../../d2/d45/classbenchmax_1_1Tool.html" title="Base class for any tool.">benchmax::Tool</a></code> can be used as a default. It will run the given binary on any input file and benchmax records the exit code as well as the runtime.</p>
<p>If more information is needed a new tool class can be derived that overrides or extends the default behaviour. Some premade tools are available (and new ones should be easy to create):</p>
<ul>
<li><a class="el" href="../../d1/da5/classbenchmax_1_1MathSAT.html" title="Tool wrapper for MathSAT for SMT-LIB.">benchmax::MathSAT</a></li>
<li><a class="el" href="../../d4/dfd/classbenchmax_1_1Minisatp.html" title="Tool wrapper for the Minisatp solver for pseudo-Boolean problems.">benchmax::Minisatp</a></li>
<li><a class="el" href="../../df/d62/classbenchmax_1_1SMTRAT.html" title="Tool wrapper for SMT-RAT for SMT-LIB.">benchmax::SMTRAT</a></li>
<li><a class="el" href="../../da/d8e/classbenchmax_1_1SMTRAT__OPB.html" title="Adapts the SMTRAT solver for OPB files.">benchmax::SMTRAT_OPB</a></li>
<li><a class="el" href="../../d0/d3a/classbenchmax_1_1Z3.html" title="Tool wrapper for Z3 for SMT-LIB.">benchmax::Z3</a></li>
</ul>
<h1><a class="anchor" id="backends"></a>
Backends</h1>
<p>A <a class="el" href="../../d4/d9f/classbenchmax_1_1Backend.html">backend</a> offers the means to run the tasks in a specific manner. A number of different backends are implemented that allow for using benchmax in various scenarios.</p>
<h2><a class="anchor" id="autotoc_md70"></a>
LocalBackend</h2>
<p>The <a class="el" href="../../df/d9e/classbenchmax_1_1LocalBackend.html">LocalBackend</a> can be used to execute benchmarks on a local machine easily. It does not allow for any parallelization but simply executes all tasks sequentially.</p>
<h2><a class="anchor" id="autotoc_md71"></a>
SlurmBackend</h2>
<p>The <a class="el" href="../../db/da2/classbenchmax_1_1SlurmBackend.html">SlurmBackend</a> employs the Slurm workload manager to run benchmarks on a cluster. It essentially collects all tasks that shall be run in a file and creates an appropriate slurm submit file. It then submits this job, waits for it to finish and collects the results from the output files.</p>
<p>The Slurm backend supports starting (<code>--mode execute</code>) and collecting results (<code>--mode collect</code>) separately, thus avoiding the need for running benchmax in a screen. <br  />
</p>
<h2><a class="anchor" id="autotoc_md72"></a>
SSHBackend</h2>
<p>The <a class="el" href="../../d1/da6/classbenchmax_1_1SSHBackend.html">SSHBackend</a> can be used if you have multiple workers that can be reached via ssh (essentially a cluster without a batch job system). It allows to configure one or more computing nodes and manually schedules all the jobs on the different computing nodes.</p>
<p>Using <code>--ssh.node</code>, a node is specified in the format <code>&lt;user&gt;[:&lt;password&gt;]@&lt;hostname&gt;[:&lt;port = 22&gt;][@&lt;cores = 1&gt;][#&lt;connections = 1&gt;]</code>; benchmax will then connect to the specified server with given credentials <code>connections</code> times and will run <code>cores</code> threads per connection. Thus, the number of overall parallel threads equals <code>connections</code> * <code>cores</code> (note that enough memory should be available on the node).</p>
<p>By setting the flag <code>--ssh.resolvedeps</code>, dependencies (i.e. dynamic libraries) are resolved and uploaded with the solver.</p>
<h2><a class="anchor" id="autotoc_md73"></a>
CondorBackend (unstable)</h2>
<p>The <a class="el" href="../../dd/ddb/classbenchmax_1_1CondorBackend.html">CondorBackend</a> is aimed at the HTCondor batch system and works similar to the SlurmBackend. Note however that this backend is not well tested and we therefore consider it unstable.</p>
<h1><a class="anchor" id="autotoc_md74"></a>
Troubleshooting</h1>
<ul>
<li>If benchmax terminates due to a segmentation fault without any message, then it probably exceeded available memory. A common error is that SMT-RAT has produced too much logging output. To fix this, simply build SMT-RAT with <code>LOGGING=OFF</code>. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d7/d83/tools.html">Other tools</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
